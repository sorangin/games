<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sora Games</title>

    <link rel="icon" href="images/favicon.ico" type="image/x-icon">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Orbitron:wght@500;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link rel="stylesheet" href="style.css">

    <style>
        /* Transition handling */
        #app-container {
            transition: opacity 0.2s ease-in-out;
            opacity: 1;
            min-height: 80vh;
        }
        .fading { opacity: 0 !important; }
    </style>
</head>
<body>

    <div class="noise-overlay"></div>

    <!-- HEADER -->
    <header class="site-header">
        <div class="header-content">
            <a href="?page=home" onclick="event.preventDefault(); loadPage('home');" class="logo-link">
                <img src="images/logo.png" alt="Sora Games Logo" class="logo-img">
                <span class="logo-text">Sora Games</span>
            </a>
            <!-- Navigation updates dynamically based on page -->
            <nav class="main-nav" id="dynamic-nav"></nav>
        </div>
    </header>

    <!-- MAIN CONTENT CONTAINER -->
    <!-- The class will change dynamically from 'content-area' to 'content-area game-detail-page' -->
    <main id="app-container" class="content-area">
        <!-- Content injects here -->
    </main>

    <!-- FOOTER -->
    <footer class="site-footer">
        <div class="footer-content">
            <div class="footer-logo">
                <img src="images/logo.png" alt="Sora Games Logo" class="footer-logo-img">
                <span>Sora Games</span>
            </div>
            <div class="footer-info">
                 <p>Â© <span id="current-year"></span> Sora Ngin. All Rights Reserved.</p>
                 <p>Creating worlds, one pixel at a time.</p>
            </div>
            <div class="footer-donate">
                <p class="donate-text">Enjoy the games? Support development!</p>
                <a href="https://www.paypal.com/donate/?cmd=_donations&business=Sorangin%40gmail.com"
                   target="_blank" rel="noopener noreferrer" title="Donate via PayPal">
                    <img src="images/donate.png" alt="PayPal Donate Button">
                </a>
            </div>
            <div class="footer-social"></div>
        </div>
    </footer>

    <button id="back-to-top" title="Back to Top"><i class="fas fa-arrow-up"></i></button>

    <!-- ====================================================== -->
    <!-- ALL PAGE TEMPLATES -->
    <!-- ====================================================== -->

    <!-- HOME TEMPLATE -->
    <template id="tpl-home">
        <!-- Section 1: Featured -->
        <section id="main-games" class="game-section featured-games">
            <h2 class="section-title">Featured Creations</h2>
            <div class="game-grid">
                <!-- Rota -->
                <a href="rota" class="game-card" data-tags="Survival, Arcade">
                    <div class="card-image-container">
                        <img src="images/rota_screenshot.png" alt="Revenge of the Ants" class="game-image" data-static-src="images/rota_screenshot.png" data-gif-src="images/rota_anim.gif">
                        <div class="image-overlay"><i class="fas fa-play play-icon"></i></div>
                    </div>
                    <div class="card-content">
                        <h3 class="game-title">Revenge of the Ants</h3>
                        <p class="game-description">Giant ants are out for revenge! Defend your kingdom as a valiant knight.</p>
                        <div class="game-tags"><span class="tag">Survival</span><span class="tag">Arcade</span></div>
                    </div>
                </a>
                <!-- Knight's Gambit -->
                <a href="KnightsGambit/index.html" class="game-card" data-tags="Strategy, Turn-Based">
                    <div class="card-image-container">
                        <img src="images/knights_vs_goblins_screenshot.png" alt="Knight's Gambit" class="game-image" data-static-src="images/knights_vs_goblins_screenshot.png" data-gif-src="images/knights_gambit_anim.gif">
                        <div class="image-overlay"><i class="fas fa-play play-icon"></i></div>
                    </div>
                    <div class="card-content">
                        <h3 class="game-title">Knight's Gambit</h3>
                        <p class="game-description">Outmaneuver goblin hordes on a perilous battlefield.</p>
                        <div class="game-tags"><span class="tag">Strategy</span><span class="tag">Turn-Based</span></div>
                    </div>
                </a>
                <!-- Kingsfall Chess -->
                <a href="KingsfallChess" class="game-card" data-tags="Strategy, Chess">
                     <div class="card-image-container">
                         <img src="images/chess_screenshot.jpg" alt="Kingsfall Chess" class="game-image" data-static-src="images/chess_screenshot.jpg" data-gif-src="images/chess_anim.gif">
                        <div class="image-overlay"><i class="fas fa-play play-icon"></i></div>
                    </div>
                    <div class="card-content">
                         <h3 class="game-title">Kingsfall Chess</h3>
                         <p class="game-description">A unique twist on classic chess with unique art and challenging AI opponents.</p>
                         <div class="game-tags"><span class="tag">Strategy</span><span class="tag">Chess</span></div>
                    </div>
                 </a>
                 <!-- Risen Realms -->
                 <a href="tcg.html" class="game-card" data-tags="Card Game, Strategy">
                     <div class="card-image-container">
                         <img src="images/tcg_screenshot.png" alt="Risen Realms" class="game-image" data-static-src="images/tcg_screenshot.png" data-gif-src="images/tcg_anim.gif">
                         <div class="image-overlay"><i class="fas fa-play play-icon"></i></div>
                     </div>
                     <div class="card-content">
                         <h3 class="game-title">Risen Realms</h3>
                         <p class="game-description">Build powerful decks and battle opponents in this strategic trading card game.</p>
                         <div class="game-tags"><span class="tag">Card Game</span><span class="tag">Strategy</span></div>
                     </div>
                 </a>
            </div>
        </section>

        <!-- Section 2: In Development (Converted to internal links) -->
        <section id="in-development" class="game-section development-games">
            <h2 class="section-title">Upcoming Adventures</h2>
            <p class="section-subtitle">Current projects in active development. Click for more details!</p>
            <div class="game-grid">

                <!-- Yoink -->
                <a href="?page=yoink-the-king" onclick="event.preventDefault(); loadPage('yoink-the-king');" class="game-card" data-tags="Strategy, Multiplayer">
                    <div class="card-image-container">
                        <img src="images/yoinktheking_anim.gif" alt="Yoink the King" class="game-image">
                        <div class="image-overlay"><i class="fas fa-info-circle play-icon"></i></div>
                    </div>
                    <div class="card-content">
                        <h3 class="game-title">Yoink the King [2018]</h3>
                        <p class="game-description">Arrows, swords, and kidnapped kings... Outsmart your opponents!</p>
                        <div class="game-tags"><span class="tag tag-dem">Demo Available</span><span class="tag">Strategy</span></div>
                    </div>
                </a>

                <!-- Frostfire -->
                <a href="?page=frostfire" onclick="event.preventDefault(); loadPage('frostfire');" class="game-card">
                    <div class="card-image-container">
                        <img src="images/frostfire_anim.gif" alt="Frostfire" class="game-image">
                        <div class="image-overlay"><i class="fas fa-info-circle play-icon"></i></div>
                    </div>
                    <div class="card-content">
                        <h3 class="game-title">Frostfire [2010]</h3>
                        <p class="game-description">Harness frost powers to stop the malevolent Fire Wizards.</p>
                        <div class="game-tags"><span class="tag tag-dev">In Development</span><span class="tag">Action RPG</span></div>
                    </div>
                </a>

                <!-- Small World -->
                <a href="?page=small-world" onclick="event.preventDefault(); loadPage('small-world');" class="game-card">
                    <div class="card-image-container">
                        <img src="images/smallworld.jpg" alt="Small World" class="game-image">
                        <div class="image-overlay"><i class="fas fa-info-circle play-icon"></i></div>
                    </div>
                    <div class="card-content">
                        <h3 class="game-title">Small World [2010]</h3>
                        <p class="game-description">Six heroes must unite and shatter the iron-fisted grip of the overlords.</p>
                         <div class="game-tags"><span class="tag tag-dem">Alpha Demo</span><span class="tag">Action RPG</span></div>
                    </div>
                </a>

                <!-- The Return -->
                <a href="?page=the-return" onclick="event.preventDefault(); loadPage('the-return');" class="game-card">
                    <div class="card-image-container">
                        <img src="images/thereturn.jpg" alt="The Return" class="game-image">
                        <div class="image-overlay"><i class="fas fa-info-circle play-icon"></i></div>
                    </div>
                    <div class="card-content">
                        <h3 class="game-title">The Return [2010]</h3>
                        <p class="game-description">Risen from the grave, Gregory must navigate a dangerous world.</p>
                         <div class="game-tags"><span class="tag tag-dev">In Development</span><span class="tag">Horror</span></div>
                    </div>
                </a>

                <!-- Ashes -->
                <a href="?page=ashes-of-veridian" onclick="event.preventDefault(); loadPage('ashes-of-veridian');" class="game-card">
                    <div class="card-image-container">
                        <img src="images/ashesofveridian.jpg" alt="Ashes of Veridian" class="game-image">
                        <div class="image-overlay"><i class="fas fa-info-circle play-icon"></i></div>
                    </div>
                    <div class="card-content">
                        <h3 class="game-title">Ashes of Veridian [2010]</h3>
                        <p class="game-description">Journey through shadows in this isometric action RPG.</p>
                         <div class="game-tags"><span class="tag tag-dev">In Development</span><span class="tag">Puzzle</span></div>
                    </div>
                </a>

                <!-- Ninja Arena -->
                <a href="?page=ninja-arena" onclick="event.preventDefault(); loadPage('ninja-arena');" class="game-card">
                    <div class="card-image-container">
                        <img src="images/ninjaarena.jpg" alt="Ninja Arena" class="game-image">
                        <div class="image-overlay"><i class="fas fa-info-circle play-icon"></i></div>
                    </div>
                    <div class="card-content">
                        <h3 class="game-title">Stick Ninja Showdown! [2011]</h3>
                        <p class="game-description">Step into the ninja arena as one of many charming stick figure ninjas!</p>
                         <div class="game-tags"><span class="tag tag-dev">In Development</span><span class="tag">Multiplayer</span></div>
                    </div>
                </a>
            </div>
        </section>

        <!-- Section 3: Prototypes -->
        <section id="prototypes" class="game-section prototype-section">
            <h2 class="section-title">Prototypes & Experiments</h2>
            <p class="section-subtitle">Playground for new ideas and works-in-progress.</p>
             <div class="game-grid">
                 <a href="MedievalMath.html" class="game-card prototype-card">
                     <div class="card-image-container">
                         <img src="images/medieval_math_screenshot.jpg" alt="Medieval Math" class="game-image">
                         <div class="image-overlay"><i class="fas fa-flask play-icon"></i></div>
                     </div>
                     <div class="card-content">
                         <h3 class="game-title">Medieval Math</h3>
                         <div class="game-tags"><span class="tag tag-proto">Educational</span></div>
                     </div>
                 </a>
                 <!-- Add your other prototypes here... -->
            </div>
        </section>
    </template>


    <!-- GAME TEMPLATE: YOINK -->
    <template id="tpl-yoink-the-king">
        <article class="game-detail-content">
            <header class="game-detail-header">
                <h1>Yoink the King <span class="release-year">[2018]</span></h1>
                <p class="game-status"><i class="fas fa-cogs"></i> In Development</p>
                <div class="game-detail-tags">
                    <span class="tag">Strategy</span><span class="tag">Multiplayer</span><span class="tag">Action</span><span class="tag tag-dev">Humor</span>
                </div>
            </header>
            <section class="game-trailer">
                <div class="video-placeholder">
                    <iframe src="https://www.youtube.com/embed/5ljmrYM_QV0" title="YouTube video player" frameborder="0" allowfullscreen></iframe>
                </div>
            </section>
            <section class="game-description-full">
                <h2>Description</h2>
                <p>Arrows, swords, and kidnapped kings... Dive into a hilariously chaotic strategy game where you control a swordsman and archer to outsmart opponents online or against the computer.</p>
            </section>
            <section class="game-screenshots">
                <h2>Screenshots & Concepts</h2>
                <div class="screenshot-grid">
                    <img src="images/yoinktheking_anim.gif" alt="Yoink 1">
                    <img src="images/yoink_gameplay_mockup_1.png" alt="Gameplay Mockup">
                    <img src="images/yoink_character_design.png" alt="Character Designs">
                    <img src="images/placeholder_screenshot.png" alt="Placeholder">
                </div>
            </section>
            <section class="game-features">
                <h2>Key Features (Planned)</h2>
                <ul>
                    <li><i class="fas fa-check"></i> Hilarious & Chaotic Strategy Gameplay</li>
                    <li><i class="fas fa-check"></i> Online Multiplayer & Challenging AI</li>
                    <li><i class="fas fa-check"></i> Capture-the-Flag Style Objective</li>
                </ul>
            </section>
            <section class="game-download">
                <h2>Download</h2>
                 <p><a href="https://drive.google.com/drive/folders/1cqYEcw-YmphrO6LQfPUDJ4Ub860ZAYYW?usp=drive_link" class="cta-button" target="_blank" rel="noopener noreferrer">Download Demo <i class="fas fa-download"></i></a></p>
            </section>
            <nav class="back-link-section">
                <a href="#" onclick="event.preventDefault(); loadPage('home');" class="back-link"><i class="fas fa-arrow-left"></i> Back to All Games</a>
            </nav>
        </article>
    </template>


    <!-- GAME TEMPLATE: FROSTFIRE -->
    <template id="tpl-frostfire">
        <article class="game-detail-content">
            <header class="game-detail-header">
                <h1>Frostfire <span class="release-year">[2010]</span></h1>
                <p class="game-status"><i class="fas fa-cogs"></i> In Development</p>
                <div class="game-detail-tags"><span class="tag">Action RPG</span><span class="tag">Fantasy</span><span class="tag tag-dev">Elements</span></div>
            </header>
            <section class="game-trailer">
                <!-- Fixed Path: Removed ../ -->
                <div class="image-placeholder"><img src="images/frostfire0.jpg" alt="Frostfire Screenshot"></div>
            </section>
            <section class="game-description-full">
                <h2>Description</h2>
                <p>In a world ravaged by a fiery invasion, Roman the Wizard must harness his frost powers to stop the malevolent Fire Wizards from uniting a world-ending orb.</p>
            </section>
            <section class="game-screenshots">
                <h2>Concepts</h2>
                <div class="screenshot-grid">
                    <!-- Fixed Paths: Removed ../ -->
                    <img src="images/frostfire1.jpg" alt="Frostfire 1">
                    <img src="images/frostfire_anim.gif" alt="Frostfire GIF">
                    <img src="images/frostfire3.gif" alt="Frostfire GIF 2">
                    <img src="images/frostfire4.jpg" alt="Frostfire 4">
                    <img src="images/frostfire5.jpg" alt="Frostfire 5">
                </div>
            </section>
            <section class="game-features">
                <h2>Key Features (Planned)</h2>
                <ul>
                    <li><i class="fas fa-check"></i> Dynamic Dual-Element Combat System</li>
                    <li><i class="fas fa-check"></i> Open-World Exploration</li>
                    <li><i class="fas fa-check"></i> Deep Character Progression</li>
                </ul>
            </section>
            <section class="game-download">
                <h2>Get Involved / Download</h2>
                <p>Frostfire is in the early stages of renewed development.</p>
                <a href="#" class="cta-button disabled">Download Demo (Coming Soon) <i class="fas fa-download"></i></a>
            </section>
            <nav class="back-link-section">
                <a href="#" onclick="event.preventDefault(); loadPage('home');" class="back-link"><i class="fas fa-arrow-left"></i> Back to All Games</a>
            </nav>
        </article>
    </template>


    <!-- GAME TEMPLATE: SMALL WORLD -->
    <template id="tpl-small-world">
        <article class="game-detail-content">
            <header class="game-detail-header">
                <h1>Small World <span class="release-year">[2010]</span></h1>
                <p class="game-status"><i class="fas fa-cogs"></i> In Development</p>
                <div class="game-detail-tags"><span class="tag">Puzzle</span><span class="tag">Adventure</span><span class="tag tag-dev">Miniature</span></div>
            </header>
            <section class="game-trailer">
                <!-- Fixed Path: Removed ../ -->
                <div class="video-placeholder"><p><img src="images/smallworld.jpg" alt="Small World"></p></div>
            </section>
            <section class="game-description-full">
                <h2>Description</h2>
                <p>Six heroes, each wielding distinct talents, must unite and shatter the iron-fisted grip of the overlords.</p>
            </section>
            <section class="game-screenshots">
                <h2>Concepts</h2>
                <div class="screenshot-grid">
                    <!-- Fixed Paths: Removed ../ -->
                    <img src="images/smallworld1.jpg" alt="Small World 1">
                    <img src="images/smallworld2.jpg" alt="Small World 2">
                    <img src="images/smallworld3.jpg" alt="Small World 3">
                    <img src="images/smallworld4.jpg" alt="Small World 4">
                </div>
            </section>
            <section class="game-features">
                <h2>Key Features (Planned)</h2>
                <ul>
                    <li><i class="fas fa-check"></i> Explore Detailed Miniature Worlds</li>
                    <li><i class="fas fa-check"></i> Engaging Environmental Puzzles</li>
                </ul>
            </section>
            <section class="game-download">
                <h2>Download</h2>
                 <p><a href="https://drive.google.com/drive/folders/1Kdi4AZDDK2omA4qoY-baAbtKvDdhIf9J?usp=drive_link" class="cta-button" target="_blank" rel="noopener noreferrer">Download Alpha Demo <i class="fas fa-download"></i></a></p>
            </section>
            <nav class="back-link-section">
                <a href="#" onclick="event.preventDefault(); loadPage('home');" class="back-link"><i class="fas fa-arrow-left"></i> Back to All Games</a>
            </nav>
        </article>
    </template>


    <!-- GAME TEMPLATE: THE RETURN -->
    <template id="tpl-the-return">
        <article class="game-detail-content">
            <header class="game-detail-header">
                <h1>The Return <span class="release-year">[2010]</span></h1>
                <p class="game-status"><i class="fas fa-cogs"></i> In Development</p>
                 <div class="game-detail-tags"><span class="tag">Adventure</span><span class="tag">Story-Driven</span><span class="tag tag-dev">Atmospheric</span></div>
            </header>
            <section class="game-trailer">
                <div class="video-placeholder"> <img src="images/thereturn.jpg" alt="The Return"></div>
            </section>
            <section class="game-description-full">
                <h2>Description</h2>
                <p>Risen from the grave with no memory but the pull of an eerie voice, Gregory must navigate a dangerous world shrouded in mystery.</p>
            </section>
            <section class="game-screenshots">
                <h2>Concepts</h2>
                <div class="screenshot-grid">
                    <img src="images/return_environment_concept.png" alt="Environment Concept">
                    <img src="images/return_character_sketch.png" alt="Character Sketch">
                    <img src="images/placeholder_screenshot.png" alt="Placeholder">
                </div>
            </section>
            <section class="game-features">
                <h2>Key Features (Planned)</h2>
                <ul>
                    <li><i class="fas fa-check"></i> Compelling Character-Driven Narrative</li>
                    <li><i class="fas fa-check"></i> Atmospheric World Design</li>
                    <li><i class="fas fa-check"></i> Exploration Focused Gameplay</li>
                </ul>
            </section>
            <section class="game-download">
                <h2>Get Involved / Download</h2>
                <p>Development has recently resumed. Follow along for updates.</p>
                <a href="#" class="cta-button disabled">Download Demo (Coming Soon) <i class="fas fa-download"></i></a>
            </section>
            <nav class="back-link-section">
                <a href="#" onclick="event.preventDefault(); loadPage('home');" class="back-link"><i class="fas fa-arrow-left"></i> Back to All Games</a>
            </nav>
        </article>
    </template>


    <!-- GAME TEMPLATE: ASHES OF VERIDIAN -->
    <template id="tpl-ashes-of-veridian">
        <article class="game-detail-content">
            <header class="game-detail-header">
                <h1>Ashes of Veridian <span class="release-year">[2010]</span></h1>
                <p class="game-status"><i class="fas fa-cogs"></i> In Development</p>
                <div class="game-detail-tags"><span class="tag">Action RPG</span><span class="tag">Isometric</span><span class="tag tag-dev">Post-Apocalyptic</span></div>
            </header>
            <section class="game-trailer">
                <div class="video-placeholder"><img src="images/ashesofveridian.jpg" alt="Ashes of Veridian" class="game-image"></div>
            </section>
            <section class="game-description-full">
                <h2>Description</h2>
                <p>Once a legendary king, now a broken prisoner. Journey through shadows in this isometric action RPG.</p>
            </section>
            <section class="game-screenshots">
                <h2>Concepts</h2>
                <div class="screenshot-grid">
                    <img src="images/shattered_world_concept.png" alt="World Concept">
                    <img src="images/shattered_ability_mockup.png" alt="Ability Mockup">
                    <img src="images/shattered_creature_design.png" alt="Creature Design">
                </div>
            </section>
            <section class="game-features">
                <h2>Key Features (Planned)</h2>
                <ul>
                    <li><i class="fas fa-check"></i> Explore a Fragmented, Surreal World</li>
                    <li><i class="fas fa-check"></i> Fast-Paced Combat</li>
                    <li><i class="fas fa-check"></i> Deep Mystery and Lore</li>
                </ul>
            </section>
            <section class="game-download">
                <h2>Get Involved / Download</h2>
                <p>This project is ambitious and currently being prototyped.</p>
                <a href="#" class="cta-button disabled">Download Demo (Coming Soon) <i class="fas fa-download"></i></a>
            </section>
            <nav class="back-link-section">
                <a href="#" onclick="event.preventDefault(); loadPage('home');" class="back-link"><i class="fas fa-arrow-left"></i> Back to All Games</a>
            </nav>
        </article>
    </template>


    <!-- GAME TEMPLATE: NINJA ARENA -->
    <template id="tpl-ninja-arena">
        <article class="game-detail-content">
            <header class="game-detail-header">
                <h1>Stick Ninja Showdown! <span class="release-year">[2011]</span></h1>
                <p class="game-status"><i class="fas fa-cogs"></i> In Development</p>
                <div class="game-detail-tags"><span class="tag">Action</span><span class="tag">Fighting</span><span class="tag tag-dev">Multiplayer</span></div>
            </header>
            <section class="game-trailer">
                <div class="video-placeholder"><img src="images/ninjaarena.jpg" alt="Ninja Arena"></div>
            </section>
            <section class="game-description-full">
                <h2>Description</h2>
                <p>Step into the ninja arena as one of many charming stick figure ninjas! Battle it out with up to 6 players.</p>
            </section>
            <section class="game-screenshots">
                <h2>Concepts</h2>
                <div class="screenshot-grid">
                    <img src="images/ninja_arena_char_concept.png" alt="Character Concepts">
                    <img src="images/ninja_arena_stage_concept.png" alt="Arena Concept">
                    <img src="images/ninja_arena_combat_mockup.png" alt="Combat Mockup">
                </div>
            </section>
            <section class="game-features">
                <h2>Key Features (Planned)</h2>
                <ul>
                    <li><i class="fas fa-check"></i> Fast-Paced, Acrobatic Ninja Combat</li>
                    <li><i class="fas fa-check"></i> Roster of Unique Ninja Characters</li>
                    <li><i class="fas fa-check"></i> Online & Local Multiplayer Modes</li>
                </ul>
            </section>
            <section class="game-download">
                <h2>Get Involved / Download</h2>
                <p>Prototyping for 'Ninja Arena' is underway.</p>
                <a href="#" class="cta-button disabled">Download Demo (Coming Soon) <i class="fas fa-download"></i></a>
            </section>
            <nav class="back-link-section">
                <a href="#" onclick="event.preventDefault(); loadPage('home');" class="back-link"><i class="fas fa-arrow-left"></i> Back to All Games</a>
            </nav>
        </article>
    </template>


    <!-- ====================================================== -->
    <!-- JAVASCRIPT LOGIC -->
    <!-- ====================================================== -->
    
    <script src="script.js"></script>

    <script>
        const container = document.getElementById('app-container');
        const navContainer = document.getElementById('dynamic-nav');

        function loadPage(pageName) {
            const template = document.getElementById(`tpl-${pageName}`);
            
            if (!template) {
                console.error("Template not found: " + pageName);
                return;
            }

            // 1. Fade Out
            container.classList.add('fading');

            setTimeout(() => {
                // 2. Swap content
                container.innerHTML = '';
                const clone = template.content.cloneNode(true);
                container.appendChild(clone);
                
                // 3. UPDATE CLASSES TO RESTORE FORMATTING
                // Your CSS likely relies on .game-detail-page for formatting game pages
                if (pageName === 'home') {
                    container.className = 'content-area'; 
                    // Remove the class that styles game pages
                } else {
                    container.className = 'content-area game-detail-page'; 
                    // Add the class so images and layouts appear correctly
                }

                // 4. Update URL & Scroll
                const newUrl = pageName === 'home' ? window.location.pathname : `?page=${pageName}`;
                window.history.pushState({ path: newUrl, pageId: pageName }, '', newUrl);
                window.scrollTo(0, 0);

                // 5. Fade In
                container.classList.remove('fading');
                updateNav(pageName);

            }, 200);
        }

        function updateNav(pageName) {
            if (pageName === 'home') {
                navContainer.innerHTML = ''; // Or your standard menu links
            } else {
                navContainer.innerHTML = `<a href="#" onclick="event.preventDefault(); loadPage('home');">Back to Games</a>`;
            }
        }

        window.onpopstate = function(event) {
            const params = new URLSearchParams(window.location.search);
            const page = params.get('page') || 'home';
            
            // Handle back button without full reload logic
            const template = document.getElementById(`tpl-${page}`);
            if(template) {
                container.innerHTML = '';
                container.appendChild(template.content.cloneNode(true));
                
                // Important: Re-apply the class logic here too
                if (page === 'home') {
                    container.className = 'content-area';
                } else {
                    container.className = 'content-area game-detail-page';
                }
                updateNav(page);
            }
        };

        window.addEventListener('DOMContentLoaded', () => {
            // Copyright year logic
            const yearSpan = document.getElementById('current-year');
            if(yearSpan) yearSpan.textContent = new Date().getFullYear();

            // Load initial page
            const params = new URLSearchParams(window.location.search);
            const page = params.get('page') || 'home';
            loadPage(page);
        });
    </script>

</body>
</html>